<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>MiceExtVal example of use • MiceExtVal</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MiceExtVal example of use">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MiceExtVal</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/get-started.html">MiceExtVal example of use</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="get-started_files/kePrint-0.0.1/kePrint.js"></script><link href="get-started_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>MiceExtVal example of use</h1>
                        <h4 data-toc-skip class="author">Asier
Ballesteros Domínguez</h4>
                        
      

      <div class="d-none name"><code>get-started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="required-libraries">Required libraries<a class="anchor" aria-label="anchor" href="#required-libraries"></a>
</h2>
<p>The following code snippet lists all the libraries needed to run this
report.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MiceExtVal</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/amices/mice" class="external-link">mice</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ddsjoberg/gtsummary" class="external-link">gtsummary</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></code></pre></div>
<p>As an example of the package <code>MiceExtVal</code> use we will
externally validate the Framingham model, see <span class="citation">Wilson et al. (1998)</span>. We will use a dataset
obtained from <a href="https://www.kaggle.com" class="external-link">kaggle</a>. The example
of use will be structured as follows.</p>
<ol style="list-style-type: decimal">
<li>Read and explore the dataset</li>
<li>Impute the missing data</li>
<li>Define the Framingham model</li>
<li>Externally validate the model</li>
</ol>
</div>
<div class="section level2">
<h2 id="read-and-explore-the-dataset">Read and Explore the Dataset<a class="anchor" aria-label="anchor" href="#read-and-explore-the-dataset"></a>
</h2>
<p>To recreate an external validation of the Framingham model we need a
dataset with the model variables. In the package we have included the
Framingham dataset provided in <a href="https://www.kaggle.com" class="external-link">kaggle</a> by <a href="https://www.kaggle.com/datasets/shreyjain601/framingham-heart-study" class="external-link">Shrey
Jain</a>. The dataset contains the variables described in next table. We
can observe that there exists some missing values in some variables.</p>
<div id="mwlefoodfi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mwlefoodfi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mwlefoodfi thead, #mwlefoodfi tbody, #mwlefoodfi tfoot, #mwlefoodfi tr, #mwlefoodfi td, #mwlefoodfi th {
  border-style: none;
}

#mwlefoodfi p {
  margin: 0;
  padding: 0;
}

#mwlefoodfi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mwlefoodfi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mwlefoodfi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mwlefoodfi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mwlefoodfi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mwlefoodfi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mwlefoodfi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mwlefoodfi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mwlefoodfi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mwlefoodfi .gt_spanner_row {
  border-bottom-style: hidden;
}

#mwlefoodfi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mwlefoodfi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mwlefoodfi .gt_from_md > :first-child {
  margin-top: 0;
}

#mwlefoodfi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mwlefoodfi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mwlefoodfi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mwlefoodfi .gt_row_group_first td {
  border-top-width: 2px;
}

#mwlefoodfi .gt_row_group_first th {
  border-top-width: 2px;
}

#mwlefoodfi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mwlefoodfi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mwlefoodfi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_left {
  text-align: left;
}

#mwlefoodfi .gt_center {
  text-align: center;
}

#mwlefoodfi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mwlefoodfi .gt_font_normal {
  font-weight: normal;
}

#mwlefoodfi .gt_font_bold {
  font-weight: bold;
}

#mwlefoodfi .gt_font_italic {
  font-style: italic;
}

#mwlefoodfi .gt_super {
  font-size: 65%;
}

#mwlefoodfi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mwlefoodfi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mwlefoodfi .gt_indent_1 {
  text-indent: 5px;
}

#mwlefoodfi .gt_indent_2 {
  text-indent: 10px;
}

#mwlefoodfi .gt_indent_3 {
  text-indent: 15px;
}

#mwlefoodfi .gt_indent_4 {
  text-indent: 20px;
}

#mwlefoodfi .gt_indent_5 {
  text-indent: 25px;
}

#mwlefoodfi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mwlefoodfi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="label"><span class="gt_from_md"><strong>Characteristic</strong></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_1">
<span class="gt_from_md"><strong>No</strong><br>
N = 8,469</span><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_2">
<span class="gt_from_md"><strong>Yes</strong><br>
N = 3,158</span><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">Sex, 1=male, 2=female</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_1" class="gt_row gt_center">3,255 / 8,469 (38%)</td>
<td headers="stat_2" class="gt_row gt_center">1,767 / 3,158 (56%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    2</td>
<td headers="stat_1" class="gt_row gt_center">5,214 / 8,469 (62%)</td>
<td headers="stat_2" class="gt_row gt_center">1,391 / 3,158 (44%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Age, years</td>
<td headers="stat_1" class="gt_row gt_center">53.83 (9.43)</td>
<td headers="stat_2" class="gt_row gt_center">57.36 (9.45)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Total cholesterol, mg/dL</td>
<td headers="stat_1" class="gt_row gt_center">238.08 (44.17)</td>
<td headers="stat_2" class="gt_row gt_center">249.42 (47.47)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    (Missing)</td>
<td headers="stat_1" class="gt_row gt_center">299</td>
<td headers="stat_2" class="gt_row gt_center">110</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">HDL cholesterol, mg/dL</td>
<td headers="stat_1" class="gt_row gt_center">50.66 (15.63)</td>
<td headers="stat_2" class="gt_row gt_center">45.61 (15.00)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    (Missing)</td>
<td headers="stat_1" class="gt_row gt_center">6,220</td>
<td headers="stat_2" class="gt_row gt_center">2,380</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">LDL cholesterol, mg/dL</td>
<td headers="stat_1" class="gt_row gt_center">174.04 (45.78)</td>
<td headers="stat_2" class="gt_row gt_center">183.49 (49.24)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    (Missing)</td>
<td headers="stat_1" class="gt_row gt_center">6,220</td>
<td headers="stat_2" class="gt_row gt_center">2,381</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Systolic Blood Pressure, mmHg</td>
<td headers="stat_1" class="gt_row gt_center">133.63 (21.57)</td>
<td headers="stat_2" class="gt_row gt_center">143.54 (24.38)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Diastolic Blood Pressure, mmHg</td>
<td headers="stat_1" class="gt_row gt_center">82.08 (11.18)</td>
<td headers="stat_2" class="gt_row gt_center">85.62 (12.51)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Currently smoking, 0=No, 1=Yes</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_1" class="gt_row gt_center">4,804 / 8,469 (57%)</td>
<td headers="stat_2" class="gt_row gt_center">1,794 / 3,158 (57%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_1" class="gt_row gt_center">3,665 / 8,469 (43%)</td>
<td headers="stat_2" class="gt_row gt_center">1,364 / 3,158 (43%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Diabetes, 0=No, 1=Yes</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_1" class="gt_row gt_center">8,219 / 8,469 (97%)</td>
<td headers="stat_2" class="gt_row gt_center">2,878 / 3,158 (91%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_1" class="gt_row gt_center">250 / 8,469 (3.0%)</td>
<td headers="stat_2" class="gt_row gt_center">280 / 3,158 (8.9%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Time of follow up, days</td>
<td headers="stat_1" class="gt_row gt_center">8,063.37 (1,648.67)</td>
<td headers="stat_2" class="gt_row gt_center">4,178.32 (2,721.05)</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="3">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> <span class="gt_from_md">n / N (%); Mean (SD)</span>
</td>
    </tr></tfoot>
</table>
</div>
<p>In the following table there are represented the percentage o
missings in the variables that have at least one row with a missing
value.</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:center;">
Percentage of Missings
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ldlc
</td>
<td style="text-align:center;">
73.97
</td>
</tr>
<tr>
<td style="text-align:left;">
hdlc
</td>
<td style="text-align:center;">
73.97
</td>
</tr>
<tr>
<td style="text-align:left;">
totchol
</td>
<td style="text-align:center;">
3.52
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="impute-missing-data">Impute Missing Data<a class="anchor" aria-label="anchor" href="#impute-missing-data"></a>
</h2>
<p>To ammend these missing values we will impute their expected values
using the mice package, see <span class="citation">van Buuren &amp;
Groothuis-Oudshoorn (2011)</span>. We will execute the default
imputation as we are no interested in be so precise, we just want to
reproduce an use case where we need to impute some missing data and from
this data externally validate one or more models.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pred_matrix</span> <span class="op">&lt;-</span> <span class="fu">mice</span><span class="fu">::</span><span class="fu"><a href="https://amices.org/mice/reference/make.predictorMatrix.html" class="external-link">make.predictorMatrix</a></span><span class="op">(</span><span class="fu">MiceExtVal</span><span class="fu">::</span><span class="va"><a href="../reference/framingham.html">framingham</a></span><span class="op">)</span></span>
<span><span class="va">pred_matrix</span><span class="op">[</span>, <span class="st">"randid"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">pred_matrix</span><span class="op">[</span>, <span class="st">"period"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="va">mice_data</span> <span class="op">&lt;-</span> <span class="fu">mice</span><span class="fu">::</span><span class="fu"><a href="https://amices.org/mice/reference/mice.html" class="external-link">mice</a></span><span class="op">(</span><span class="fu">MiceExtVal</span><span class="fu">::</span><span class="va"><a href="../reference/framingham.html">framingham</a></span><span class="op">)</span></span>
<span><span class="va">fram_long</span> <span class="op">&lt;-</span> <span class="fu">mice</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/complete.html" class="external-link">complete</a></span><span class="op">(</span><span class="va">mice_data</span>, <span class="st">"long"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-framingham-model">The Framingham Model<a class="anchor" aria-label="anchor" href="#the-framingham-model"></a>
</h2>
<p>With the data ready to be used we need to take some time to
understand the model that we want to validate, the Framingham model.
This model is a Cox model that predicts the risk to suffer a coronary
heart disease in patients that are <span class="math inline">\(30-79\)</span> years old. The Framingham model
coefficients are represented in the following table.</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:center;">
Men
</th>
<th style="text-align:center;">
Women
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Age, y
</td>
<td style="text-align:center;">
0.0483
</td>
<td style="text-align:center;">
0.3377
</td>
</tr>
<tr>
<td style="text-align:left;">
Age squared, y
</td>
<td style="text-align:center;">
<ul><li></ul>
</td>
<td style="text-align:center;">
-0.0027
</td>
</tr>
<tr>
<td style="text-align:left;">
Diabetes
</td>
<td style="text-align:center;">
0.4284
</td>
<td style="text-align:center;">
0.5963
</td>
</tr>
<tr>
<td style="text-align:left;">
Smoker
</td>
<td style="text-align:center;">
0.5234
</td>
<td style="text-align:center;">
0.2925
</td>
</tr>
<tr grouplength="5">
<td colspan="3" style="border-bottom: 1px solid;">
TC, mg/dL
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
&lt;160
</td>
<td style="text-align:center;">
-0.6594
</td>
<td style="text-align:center;">
-0.2614
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
160-199
</td>
<td style="text-align:center;">
<ul><li></ul>
</td>
<td style="text-align:center;">
<ul><li></ul>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
200-239
</td>
<td style="text-align:center;">
0.1769
</td>
<td style="text-align:center;">
0.2077
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
240-279
</td>
<td style="text-align:center;">
0.5054
</td>
<td style="text-align:center;">
0.2439
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
&gt;280
</td>
<td style="text-align:center;">
0.6571
</td>
<td style="text-align:center;">
0.5351
</td>
</tr>
<tr grouplength="5">
<td colspan="3" style="border-bottom: 1px solid;">
HDL-C, mg/dL
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
&lt;35
</td>
<td style="text-align:center;">
0.4974
</td>
<td style="text-align:center;">
0.8431
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
35-44
</td>
<td style="text-align:center;">
0.2431
</td>
<td style="text-align:center;">
0.3780
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
45-49
</td>
<td style="text-align:center;">
<ul><li></ul>
</td>
<td style="text-align:center;">
0.1978
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
50-59
</td>
<td style="text-align:center;">
-0.0511
</td>
<td style="text-align:center;">
<ul><li></ul>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
&gt;60
</td>
<td style="text-align:center;">
-0.4866
</td>
<td style="text-align:center;">
-0.4295
</td>
</tr>
<tr grouplength="5">
<td colspan="3" style="border-bottom: 1px solid;">
Blood Pressure
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Optimal
</td>
<td style="text-align:center;">
-0.0023
</td>
<td style="text-align:center;">
-0.5336
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Normal
</td>
<td style="text-align:center;">
<ul><li></ul>
</td>
<td style="text-align:center;">
<ul><li></ul>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
High Normal
</td>
<td style="text-align:center;">
0.2832
</td>
<td style="text-align:center;">
-0.0677
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Stage I hypertension
</td>
<td style="text-align:center;">
0.5217
</td>
<td style="text-align:center;">
0.2629
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Stage II-IV hypertension
</td>
<td style="text-align:center;">
0.6186
</td>
<td style="text-align:center;">
0.4657
</td>
</tr>
<tr>
<td style="text-align:left;">
Baseline survival function at 10 years, S(t)
</td>
<td style="text-align:center;">
0.9002
</td>
<td style="text-align:center;">
0.9625
</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="requirements-to-define-the-model">Requirements to Define the Model<a class="anchor" aria-label="anchor" href="#requirements-to-define-the-model"></a>
</h3>
<p>The Framingham model had defined the variables that are used to
calculate the model predictions. In the dataset we have the data needed
to meet this requirements. Before defining the model we need to generate
the variables that are not present in the dataset. In the previous table
we can observe that some continous variables are converted into
categorical. More precisely, the total cholesterol, HDL cholesterol and
blood pressure are categorized.</p>
<div class="section level4">
<h4 id="total-cholesterol">Total Cholesterol<a class="anchor" aria-label="anchor" href="#total-cholesterol"></a>
</h4>
<p>The total cholesterol variable is categorized into five categories,
less than 160 mg/dL, between 160 and 199 mg/dL, between 200 and 239
mg/dL, between 240 and 279 mg/dl, and more than 280 mg/dL. The following
code snippet generates the variable in the dataset.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Variable</th>
<th align="center">Men</th>
<th align="center">Women</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>TC, mg/dL</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">&lt;160</td>
<td align="center">-0.6594</td>
<td align="center">-0.2614</td>
</tr>
<tr class="odd">
<td align="left">160-199</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">200-239</td>
<td align="center">0.1769</td>
<td align="center">0.2077</td>
</tr>
<tr class="odd">
<td align="left">240-279</td>
<td align="center">0.5054</td>
<td align="center">0.2439</td>
</tr>
<tr class="even">
<td align="left">&gt;280</td>
<td align="center">0.6571</td>
<td align="center">0.5351</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fram_long</span> <span class="op">&lt;-</span> <span class="va">fram_long</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    totchol_less_160 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">totchol</span> <span class="op">&lt;</span> <span class="fl">160</span><span class="op">)</span>,</span>
<span>    totchol_160_199 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">totchol</span> <span class="op">&gt;=</span> <span class="fl">160</span> <span class="op">&amp;</span> <span class="va">totchol</span> <span class="op">&lt;</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>    totchol_200_239 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">totchol</span> <span class="op">&gt;=</span> <span class="fl">200</span> <span class="op">&amp;</span> <span class="va">totchol</span> <span class="op">&lt;</span> <span class="fl">240</span><span class="op">)</span>,</span>
<span>    totchol_240_279 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">totchol</span> <span class="op">&gt;=</span> <span class="fl">240</span> <span class="op">&amp;</span> <span class="va">totchol</span> <span class="op">&lt;</span> <span class="fl">280</span><span class="op">)</span>,</span>
<span>    totchol_greater_280 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">totchol</span> <span class="op">&gt;=</span> <span class="fl">280</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="hdl-cholesterol">HDL cholesterol<a class="anchor" aria-label="anchor" href="#hdl-cholesterol"></a>
</h4>
<p>The Framingham model characterizes the HDL cholesterol into five
groups, less than 35 mg/dL, between 35 and 44 mg/dL, between 45 and 49
mg/dL, between 50 and 59 mg/dL, and more than 60 mg/dL. As before the
following code snippet generates the variable in the dataset.</p>
<table class="table">
<caption>{.plain .table-sm}</caption>
<thead><tr class="header">
<th align="left">Variable</th>
<th align="center">Men</th>
<th align="center">Women</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>HDL, mg/dL</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">&lt;35</td>
<td align="center">0.49744</td>
<td align="center">0.84312</td>
</tr>
<tr class="odd">
<td align="left">35-44</td>
<td align="center">0.24310</td>
<td align="center">0.37796</td>
</tr>
<tr class="even">
<td align="left">45-49</td>
<td align="center">-</td>
<td align="center">0.19785</td>
</tr>
<tr class="odd">
<td align="left">50-59</td>
<td align="center">-0.05107</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">&gt;60</td>
<td align="center">-0.48660</td>
<td align="center">-0.42951</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fram_long</span> <span class="op">&lt;-</span> <span class="va">fram_long</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    hdl_less_35 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">hdlc</span> <span class="op">&lt;</span> <span class="fl">35</span><span class="op">)</span>,</span>
<span>    hdl_35_44 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">hdlc</span> <span class="op">&gt;=</span> <span class="fl">35</span> <span class="op">&amp;</span> <span class="va">hdlc</span> <span class="op">&lt;</span> <span class="fl">44</span><span class="op">)</span>,</span>
<span>    hdl_45_49 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">hdlc</span> <span class="op">&gt;=</span> <span class="fl">45</span> <span class="op">&amp;</span> <span class="va">hdlc</span> <span class="op">&lt;</span> <span class="fl">49</span><span class="op">)</span>,</span>
<span>    hdl_50_59 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">hdlc</span> <span class="op">&gt;=</span> <span class="fl">50</span> <span class="op">&amp;</span> <span class="va">hdlc</span> <span class="op">&lt;</span> <span class="fl">59</span><span class="op">)</span>,</span>
<span>    hdl_greater_60 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">hdlc</span> <span class="op">&gt;=</span> <span class="fl">60</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="blood-pressure">Blood pressure<a class="anchor" aria-label="anchor" href="#blood-pressure"></a>
</h4>
<p>In the model it is defined a variable that aggregates the systolyc
blood pressure and diastolic blood pressure into five groups of
hypertension. As defined by <span class="citation">Wilson et al.
(1998)</span>, we categorize each of the individual blood pressure
variables into five groups, optimal, normal, high-normal, hypertension
I, and hypertension II-IV. If a patient have different blood pressure
categories we use the highest one as a representation of they state. The
following code adds the variable to the dataset, we first generate the
individual categorization variables and generate the
<code>pressure</code> variable as the aggregation of both.</p>
<table class="table">
<caption>{.plain .table-sm}</caption>
<thead><tr class="header">
<th align="left">Variable</th>
<th align="left">Men</th>
<th align="left">Women</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Blood Pressure</strong></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Optimal</td>
<td align="left">-0.00226</td>
<td align="left">-0.53363</td>
</tr>
<tr class="odd">
<td align="left">Normal</td>
<td align="left">-</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">High Normal</td>
<td align="left">0.28320</td>
<td align="left">-0.06773</td>
</tr>
<tr class="odd">
<td align="left">Stage I hypertension</td>
<td align="left">0.52168</td>
<td align="left">0.26288</td>
</tr>
<tr class="even">
<td align="left">Stage II-IV hypertension</td>
<td align="left">0.61859</td>
<td align="left">0.46573</td>
</tr>
</tbody>
</table>
<p>We first generate a variable called <code>pressure</code> that
categorize both pressures into one variable.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pressure_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"optimal"</span>, <span class="st">"normal"</span>, <span class="st">"high-normal"</span>, <span class="st">"hypertension I"</span>, <span class="st">"hypertension II-IV"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">fram_long</span> <span class="op">&lt;-</span> <span class="va">fram_long</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    sys_lvl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span></span>
<span>      <span class="va">sysbp</span>,</span>
<span>      breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">120</span>, <span class="fl">130</span>, <span class="fl">140</span>, <span class="fl">160</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>      labels <span class="op">=</span> <span class="va">pressure_labels</span></span>
<span>    <span class="op">)</span>,</span>
<span>    dys_lvl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span></span>
<span>      <span class="va">diabp</span>,</span>
<span>      breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">80</span>, <span class="fl">85</span>, <span class="fl">90</span>, <span class="fl">100</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>      labels <span class="op">=</span> <span class="va">pressure_labels</span></span>
<span>    <span class="op">)</span>,</span>
<span>    pressure <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map2.html" class="external-link">map2_int</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">sys_lvl</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">dys_lvl</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">.x</span>, <span class="va">.y</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    pressure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>      <span class="va">pressure</span>,</span>
<span>      labels <span class="op">=</span> <span class="va">pressure_labels</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>With the <code>pressure</code> variable we generate the variables
used in the model.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fram_long</span> <span class="op">&lt;-</span> <span class="va">fram_long</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    bp_optimal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pressure</span> <span class="op">==</span> <span class="st">"optimal"</span><span class="op">)</span>,</span>
<span>    bp_high_normal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pressure</span> <span class="op">==</span> <span class="st">"high-normal"</span><span class="op">)</span>,</span>
<span>    bp_hypertension_i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pressure</span> <span class="op">==</span> <span class="st">"hypertension I"</span><span class="op">)</span>,</span>
<span>    bp_hypertension_ii_iv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pressure</span> <span class="op">==</span> <span class="st">"hypertension II-IV"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="selecting-the-needed-variables">Selecting the Needed Variables<a class="anchor" aria-label="anchor" href="#selecting-the-needed-variables"></a>
</h3>
<p>Once the Framingham variables are generated we need to create the
model in the <code>MiceExtVal</code> package. The Framingham model is
stratified by sex. Therefore, we need to generate two models, one for
males and another for females. The <code>MiceExtVal</code> package allow
us to define a Cox model using the <code><a href="../reference/mv_model_cox.html">MiceExtVal::mv_model_cox</a></code>
function where we need to introduce the model
(<code>coefficients</code>), the mean value in the derivation cohort for
each of the variables (<code>means</code>), the model formula to know
the dependent variable (<code>formula</code>) and the survival basal
function for the time of the study (<code>S0</code>).</p>
<div class="section level4">
<h4 id="generating-extra-needed-variables">Generating Extra Needed Variables<a class="anchor" aria-label="anchor" href="#generating-extra-needed-variables"></a>
</h4>
<p>Some variables like <code>cursmoke</code> or <code>diabetes</code>
are factors and to be used in the model we need to transform them to
numeric variables where <span class="math inline">\(1\)</span> indicates
<code>TRUE</code> and <span class="math inline">\(0\)</span> indicates
<code>FALSE</code>. We will also generate the variable <code>age2</code>
<span class="math inline">\(age^2\)</span> needed for the females model.
Additionally, we generate the survival outcome.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fram_long</span> <span class="op">&lt;-</span> <span class="va">fram_long</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    cursmoke <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">cursmoke</span> <span class="op">==</span> <span class="st">"1"</span><span class="op">)</span>,</span>
<span>    diabetes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">diabetes</span> <span class="op">==</span> <span class="st">"1"</span><span class="op">)</span>,</span>
<span>    age2 <span class="op">=</span> <span class="va">age</span><span class="op">**</span><span class="fl">2</span>,</span>
<span>    anychd_surv <span class="op">=</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">timechd</span>, <span class="va">anychd</span> <span class="op">==</span> <span class="st">"Yes"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Finally, we generate the males and females datasets.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">male_fram_long</span> <span class="op">&lt;-</span> <span class="va">fram_long</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">female_fram_long</span> <span class="op">&lt;-</span> <span class="va">fram_long</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="generate-the-models">Generate the models<a class="anchor" aria-label="anchor" href="#generate-the-models"></a>
</h4>
<p>The models in the package are created using the
<code><a href="../reference/mv_model_cox.html">MiceExtVal::mv_model_cox</a></code> function if we want to externally
validate a Cox model or <code><a href="../reference/mv_model_logreg.html">MiceExtVal::mv_model_logreg</a></code> if we
want to validate a logistic regression model. In this case we want to
validate the Framingham model that is a Cox model.</p>
<p>Each model needs different information in order to calculate the
predictions in the Cox model we need to introduce the following
parameters.</p>
<ul>
<li>
<code>formula</code>: A formula that defines the model. In this
formula we need to define the model coefficients and if needed, like in
this case, the means to center the variables in the <span class="math inline">\(\beta \cdot X\)</span> calculation.</li>
<li>
<code>S0</code>: The value of <span class="math inline">\(S_0(t)\)</span> for the time of study <span class="math inline">\(t\)</span> in the model. In this case <span class="math inline">\(t = 10 \text{ years}\)</span>.</li>
</ul>
<p>As the Framingham model is stratified by sex, we need to generate two
models to externally validate it.</p>
<div class="section level5">
<h5 id="males">Males<a class="anchor" aria-label="anchor" href="#males"></a>
</h5>
<p>The next code snippet generates the males model formula following the
original mean values and the coefficients described in the previous
tables.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">males_formula</span> <span class="op">&lt;-</span> <span class="va">anychd_surv</span> <span class="op">~</span> <span class="fl">0.0483</span> <span class="op">*</span> <span class="op">(</span><span class="va">age</span> <span class="op">-</span> <span class="fl">48.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.4284</span> <span class="op">*</span> <span class="op">(</span><span class="va">diabetes</span> <span class="op">-</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.5234</span> <span class="op">*</span> <span class="op">(</span><span class="va">cursmoke</span> <span class="op">-</span> <span class="fl">0.403</span><span class="op">)</span> <span class="op">-</span></span>
<span>  <span class="fl">0.6595</span> <span class="op">*</span> <span class="op">(</span><span class="va">totchol_less_160</span> <span class="op">-</span> <span class="fl">0.075</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.1769</span> <span class="op">*</span> <span class="op">(</span><span class="va">totchol_200_239</span> <span class="op">-</span> <span class="fl">0.39</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.5054</span> <span class="op">*</span> <span class="op">(</span><span class="va">totchol_240_279</span> <span class="op">-</span> <span class="fl">0.165</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.6571</span> <span class="op">*</span> <span class="op">(</span><span class="va">totchol_greater_280</span> <span class="op">-</span> <span class="fl">0.057</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.4974</span> <span class="op">*</span> <span class="op">(</span><span class="va">hdl_less_35</span> <span class="op">-</span> <span class="fl">0.192</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.2431</span> <span class="op">*</span> <span class="op">(</span><span class="va">hdl_35_44</span> <span class="op">-</span> <span class="fl">0.357</span><span class="op">)</span> <span class="op">-</span></span>
<span>  <span class="fl">0.0511</span> <span class="op">*</span> <span class="op">(</span><span class="va">hdl_50_59</span> <span class="op">-</span> <span class="fl">0.19</span><span class="op">)</span> <span class="op">-</span> <span class="fl">0.4866</span> <span class="op">*</span> <span class="op">(</span><span class="va">hdl_greater_60</span> <span class="op">-</span> <span class="fl">0.106</span><span class="op">)</span> <span class="op">-</span></span>
<span>  <span class="fl">0.0023</span> <span class="op">*</span> <span class="op">(</span><span class="va">bp_optimal</span> <span class="op">-</span> <span class="fl">0.202</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.2832</span> <span class="op">*</span> <span class="op">(</span><span class="va">bp_high_normal</span> <span class="op">-</span> <span class="fl">0.202</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.5217</span> <span class="op">*</span> <span class="op">(</span><span class="va">bp_hypertension_i</span> <span class="op">-</span> <span class="fl">0.225</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.6186</span> <span class="op">*</span> <span class="op">(</span><span class="va">bp_hypertension_ii_iv</span> <span class="op">-</span> <span class="fl">0.128</span><span class="op">)</span></span></code></pre></div>
<p>Once we have defined the needed parameters of the model we can create
the model as follows.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">male_model</span> <span class="op">&lt;-</span> <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/mv_model_cox.html">mv_model_cox</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="va">males_formula</span>,</span>
<span>  S0 <span class="op">=</span> <span class="fl">0.9002</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="females">Females<a class="anchor" aria-label="anchor" href="#females"></a>
</h5>
<p>For females we can reproduce what we have already done for males.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">females_formula</span> <span class="op">&lt;-</span> <span class="va">anychd_surv</span> <span class="op">~</span> <span class="fl">0.3377</span> <span class="op">*</span> <span class="op">(</span><span class="va">age</span> <span class="op">-</span> <span class="fl">49.6</span><span class="op">)</span> <span class="op">-</span></span>
<span>  <span class="fl">0.0027</span> <span class="op">*</span> <span class="op">(</span><span class="va">age2</span> <span class="op">-</span> <span class="fl">2604.5</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.5963</span> <span class="op">*</span> <span class="op">(</span><span class="va">diabetes</span> <span class="op">-</span> <span class="fl">0.038</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.2925</span> <span class="op">*</span> <span class="op">(</span><span class="va">cursmoke</span> <span class="op">-</span> <span class="fl">0.378</span><span class="op">)</span> <span class="op">+</span> <span class="op">-</span><span class="fl">0.2614</span> <span class="op">*</span> <span class="op">(</span><span class="va">totchol_less_160</span> <span class="op">-</span> <span class="fl">0.079</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.2077</span> <span class="op">*</span> <span class="op">(</span><span class="va">totchol_200_239</span> <span class="op">-</span> <span class="fl">0.327</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.2439</span> <span class="op">*</span> <span class="op">(</span><span class="va">totchol_240_279</span> <span class="op">-</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.5351</span> <span class="op">*</span> <span class="op">(</span><span class="va">totchol_greater_280</span> <span class="op">-</span> <span class="fl">0.91</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.8431</span> <span class="op">*</span> <span class="op">(</span><span class="va">hdl_less_35</span> <span class="op">-</span> <span class="fl">0.043</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.378</span> <span class="op">*</span> <span class="op">(</span><span class="va">hdl_35_44</span> <span class="op">-</span> <span class="fl">0.149</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.1978</span> <span class="op">*</span> <span class="op">(</span><span class="va">hdl_45_49</span> <span class="op">-</span> <span class="fl">0.124</span><span class="op">)</span> <span class="op">-</span></span>
<span>  <span class="fl">0.4295</span> <span class="op">*</span> <span class="op">(</span><span class="va">hdl_greater_60</span> <span class="op">-</span> <span class="fl">0.407</span><span class="op">)</span> <span class="op">-</span> <span class="fl">0.5336</span> <span class="op">*</span> <span class="op">(</span><span class="va">bp_optimal</span> <span class="op">-</span> <span class="fl">0.348</span><span class="op">)</span> <span class="op">-</span></span>
<span>  <span class="fl">0.0677</span> <span class="op">*</span> <span class="op">(</span><span class="va">bp_high_normal</span> <span class="op">-</span> <span class="fl">0.15</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.2629</span> <span class="op">*</span> <span class="op">(</span><span class="va">bp_hypertension_i</span> <span class="op">-</span> <span class="fl">0.186</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fl">0.4657</span> <span class="op">*</span> <span class="op">(</span><span class="va">bp_hypertension_ii_iv</span> <span class="op">-</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
<p>From the previous parameters we generate the
<code>female_model</code> to externally validate the Framingham female
model.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">female_model</span> <span class="op">&lt;-</span> <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/mv_model_cox.html">mv_model_cox</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="va">females_formula</span>,</span>
<span>  S0 <span class="op">=</span> <span class="fl">0.9625</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="external-validation">External validation<a class="anchor" aria-label="anchor" href="#external-validation"></a>
</h2>
<p>Once we have defined the Framingham model for the package we can now
start to externally validate the model. The package functions are
separated in two big groups, the functions that calculate predictions or
results from the model definition are started by
<code>calculate_</code>, and the functions that obtain external
validation results are started by <code>get_</code>.</p>
<p>The external validation can be structured in three phases.</p>
<ol style="list-style-type: decimal">
<li>Calculate the predictions.</li>
<li>Calculate the recalibrations.</li>
<li>Obtain the external validation results.</li>
</ol>
<div class="section level3">
<h3 id="calculate-the-predictions">Calculate the predictions<a class="anchor" aria-label="anchor" href="#calculate-the-predictions"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">male_model</span> <span class="op">&lt;-</span> <span class="va">male_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_predictions.html">calculate_predictions</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">_</span>, data <span class="op">=</span> <span class="va">male_fram_long</span><span class="op">)</span></span>
<span></span>
<span><span class="va">female_model</span> <span class="op">&lt;-</span> <span class="va">female_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_predictions.html">calculate_predictions</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">_</span>, data <span class="op">=</span> <span class="va">female_fram_long</span><span class="op">)</span></span></code></pre></div>
<p>As a result inside the model there are generated two tables
<code>predictions_data</code> and <code>predictions_aggregated</code>.
In the next table there are shown the first rows of the
<code>predictions_data</code> table, where there are all the predicted
values for each of the imputations.</p>
<table class="table">
<thead><tr>
<th style="text-align:right;">
prediction
</th>
<th style="text-align:right;">
.imp
</th>
<th style="text-align:left;">
id
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
0.051
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2448
</td>
</tr>
<tr>
<td style="text-align:right;">
0.202
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
9428
</td>
</tr>
<tr>
<td style="text-align:right;">
0.097
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
14367
</td>
</tr>
<tr>
<td style="text-align:right;">
0.085
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
16365
</td>
</tr>
<tr>
<td style="text-align:right;">
0.140
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
20375
</td>
</tr>
<tr>
<td style="text-align:right;">
0.123
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
33077
</td>
</tr>
</tbody>
</table>
<p>In this second table there are shown the first rows of
<code>predictions_aggregated</code> where there are only one aggregated
prediction for each patient.</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
id
</th>
<th style="text-align:right;">
prediction
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2448
</td>
<td style="text-align:right;">
0.051
</td>
</tr>
<tr>
<td style="text-align:left;">
9428
</td>
<td style="text-align:right;">
0.138
</td>
</tr>
<tr>
<td style="text-align:left;">
14367
</td>
<td style="text-align:right;">
0.156
</td>
</tr>
<tr>
<td style="text-align:left;">
16365
</td>
<td style="text-align:right;">
0.130
</td>
</tr>
<tr>
<td style="text-align:left;">
20375
</td>
<td style="text-align:right;">
0.179
</td>
</tr>
<tr>
<td style="text-align:left;">
33077
</td>
<td style="text-align:right;">
0.127
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="model-performance">Model performance<a class="anchor" aria-label="anchor" href="#model-performance"></a>
</h3>
<p>The model performance can be separated in two. The ability of the
model to discriminate high-risk patients from low-risk patients and its
calibration i.e. the ability to match the real risk and predicted risk.
The model C-Index is calculated using the Harrell’s C-Index and the
calibration ability by generating calibration plots.</p>
<div class="section level4">
<h4 id="calculating-c-index">Calculating C-Index<a class="anchor" aria-label="anchor" href="#calculating-c-index"></a>
</h4>
<div class="section level5">
<h5 id="c-index-in-males">C-Index in Males<a class="anchor" aria-label="anchor" href="#c-index-in-males"></a>
</h5>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">male_model</span> <span class="op">&lt;-</span> <span class="va">male_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_c_index.html">calculate_c_index</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">_</span>, data <span class="op">=</span> <span class="va">male_fram_long</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="c-index-in-females">C-Index in Females<a class="anchor" aria-label="anchor" href="#c-index-in-females"></a>
</h5>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">female_model</span> <span class="op">&lt;-</span> <span class="va">female_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_c_index.html">calculate_c_index</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">_</span>, data <span class="op">=</span> <span class="va">female_fram_long</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="calculating-calibration-plot">Calculating Calibration Plot<a class="anchor" aria-label="anchor" href="#calculating-calibration-plot"></a>
</h4>
<div class="section level5">
<h5 id="calibration-plot-males">Calibration Plot Males<a class="anchor" aria-label="anchor" href="#calibration-plot-males"></a>
</h5>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">male_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot_data.html">get_calibration_plot_data</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>,</span>
<span>    data <span class="op">=</span> <span class="va">male_fram_long</span>,</span>
<span>    n_groups <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"predictions_aggregated"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot.html">get_calibration_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/unnamed-chunk-17-1.png" alt="Calibration plot for males
" width="700"></p>
</div>
<div class="section level5">
<h5 id="calibration-plot-females">Calibration Plot Females<a class="anchor" aria-label="anchor" href="#calibration-plot-females"></a>
</h5>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">female_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot_data.html">get_calibration_plot_data</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>,</span>
<span>    data <span class="op">=</span> <span class="va">female_fram_long</span>,</span>
<span>    n_groups <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"predictions_aggregated"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot.html">get_calibration_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/unnamed-chunk-18-1.png" alt="Calibration plot for females
" width="700"></p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="recalibration">Recalibration<a class="anchor" aria-label="anchor" href="#recalibration"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">male_model</span> <span class="op">&lt;-</span> <span class="va">male_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_predictions_recalibrated_type_1.html">calculate_predictions_recalibrated_type_1</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>, data <span class="op">=</span> <span class="va">male_fram_long</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_predictions_recalibrated_type_2.html">calculate_predictions_recalibrated_type_2</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>, data <span class="op">=</span> <span class="va">male_fram_long</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">male_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot_data.html">get_calibration_plot_data</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>,</span>
<span>    data <span class="op">=</span> <span class="va">male_fram_long</span>,</span>
<span>    n_groups <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"predictions_recal_type_1"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot.html">get_calibration_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/unnamed-chunk-19-1.png" alt="Type 1 calibration plot for males
" width="700"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">male_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot_data.html">get_calibration_plot_data</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>,</span>
<span>    data <span class="op">=</span> <span class="va">male_fram_long</span>,</span>
<span>    n_groups <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"predictions_recal_type_2"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot.html">get_calibration_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/unnamed-chunk-20-1.png" alt="Type 2 calibration plot for males
" width="700"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">female_model</span> <span class="op">&lt;-</span> <span class="va">female_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_predictions_recalibrated_type_1.html">calculate_predictions_recalibrated_type_1</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>, data <span class="op">=</span> <span class="va">female_fram_long</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_predictions_recalibrated_type_2.html">calculate_predictions_recalibrated_type_2</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>, data <span class="op">=</span> <span class="va">female_fram_long</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">female_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot_data.html">get_calibration_plot_data</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>,</span>
<span>    data <span class="op">=</span> <span class="va">female_fram_long</span>,</span>
<span>    n_groups <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"predictions_recal_type_1"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot.html">get_calibration_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/unnamed-chunk-21-1.png" alt="Type 1 calibration plot for females" width="700"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">female_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot_data.html">get_calibration_plot_data</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="va">_</span>,</span>
<span>    data <span class="op">=</span> <span class="va">female_fram_long</span>,</span>
<span>    n_groups <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"predictions_recal_type_2"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">MiceExtVal</span><span class="fu">::</span><span class="fu"><a href="../reference/get_calibration_plot.html">get_calibration_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/unnamed-chunk-22-1.png" alt="Type 2 calibration plot for females
" width="700"></p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-mice-package" class="csl-entry">
van Buuren, S., &amp; Groothuis-Oudshoorn, K. (2011). <span class="nocase">mice</span>: Multivariate imputation by chained equations
in r. <em>Journal of Statistical Software</em>, <em>45</em>(3), 1–67. <a href="https://doi.org/10.18637/jss.v045.i03" class="external-link">https://doi.org/10.18637/jss.v045.i03</a>
</div>
<div id="ref-framingham" class="csl-entry">
Wilson, P. W. F., D’Agostino, R. B., Levy, D., Belanger, A. M.,
Silbershatz, H., &amp; Kannel, W. B. (1998). Prediction of coronary
heart disease using risk factor categories. <em>Circulation</em>,
<em>97</em>(18), 1837–1847. <a href="https://doi.org/10.1161/01.CIR.97.18.1837" class="external-link">https://doi.org/10.1161/01.CIR.97.18.1837</a>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Asier Ballesteros Domínguez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
